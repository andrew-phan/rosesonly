Glider=Class.create();Object.extend(Object.extend(Glider.prototype,Abstract.prototype),{initialize:function(e,t){this.handStopped=false;this.scrolling=false;this.wrapper=$(e);this.scroller=this.wrapper.down("div.scroller");this.sections=this.wrapper.getElementsBySelector("div.section");this.options=Object.extend({duration:1,frequency:3},t||{});this.sections.each(function(e,t){e._index=t});this.events={click:this.click.bind(this),mouseover:this.pause.bind(this),mouseout:this.resume.bind(this)};this.addObservers();if(this.options.initialSection)this.moveTo(this.options.initialSection,this.scroller,{duration:this.options.duration});if(this.options.autoGlide)this.start()},addObservers:function(){this.wrapper.observe("mouseover",this.events.mouseover);this.wrapper.observe("mouseout",this.events.mouseout);var e=this.wrapper.getElementsBySelector("div.sliderdescription");e.invoke("observe","mouseover",this.makeActive);e.invoke("observe","mouseout",this.makeInactive);var t=this.wrapper.getElementsBySelector("div.controls a");t.invoke("observe","click",this.events.click)},click:function(e){this.stop();var t=Event.findElement(e,"a");if(this.scrolling)this.scrolling.cancel();this.moveTo(t.href.split("#")[1],this.scroller,{duration:this.options.duration});Event.stop(e)},moveTo:function(e,t,n){this.current=$(e);Position.prepare();var r=Position.cumulativeOffset(t);var i=Position.cumulativeOffset($(e));this.scrolling=new Effect.SmoothScroll(t,{duration:n.duration,x:i[0]-r[0],y:i[1]-r[1]});return false},next:function(){if(this.current){var e=this.current._index;var t=this.sections.length-1==e?0:e+1}else var t=1;this.moveTo(this.sections[t],this.scroller,{duration:this.options.duration})},previous:function(){if(this.current){var e=this.current._index;var t=e==0?this.sections.length-1:e-1}else var t=this.sections.length-1;this.moveTo(this.sections[t],this.scroller,{duration:this.options.duration})},makeActive:function(e){var t=Event.findElement(e,"div");t.addClassName("active")},makeInactive:function(e){var t=Event.findElement(e,"div");t.removeClassName("active")},stop:function(){this.handStopped=true;clearTimeout(this.timer)},start:function(){this.handStopped=false;this.periodicallyUpdate()},pause:function(){if(!this.handStopped){clearTimeout(this.timer);this.timer=null}},resume:function(){if(!this.handStopped)this.periodicallyUpdate()},periodicallyUpdate:function(){if(this.timer!=null){clearTimeout(this.timer);this.next()}this.timer=setTimeout(this.periodicallyUpdate.bind(this),this.options.frequency*1e3)}});Effect.SmoothScroll=Class.create();Object.extend(Object.extend(Effect.SmoothScroll.prototype,Effect.Base.prototype),{initialize:function(e){this.element=$(e);var t=Object.extend({x:0,y:0,mode:"absolute"},arguments[1]||{});this.start(t)},setup:function(){if(this.options.continuous&&!this.element._ext){this.element.cleanWhitespace();this.element._ext=true;this.element.appendChild(this.element.firstChild)}this.originalLeft=this.element.scrollLeft;this.originalTop=this.element.scrollTop;if(this.options.mode=="absolute"){this.options.x-=this.originalLeft;this.options.y-=this.originalTop}},update:function(e){this.element.scrollLeft=this.options.x*e+this.originalLeft;this.element.scrollTop=this.options.y*e+this.originalTop}})